!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CMap=e():t.CMap=e()}(window,function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=11)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setDPIFontSize=function(t,e){if(!t)return;return Object.keys(t).forEach(function(n){var a,o,r,i;"font"===n&&(t[n]=(a=t[n],o=a.match(/([\d\.]+)(px|em)/),r=parseFloat(o[1]),i=o[2],a=a.replace(o[0],r*e+i)))}),t},e.setCtxState=function(t,e){for(var n in e.beginPath(),t)e[n]=t[n];return e}},function(t,e,n){"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}Object.defineProperty(e,"__esModule",{value:!0}),e.setHistory=function(){this.history=new this.History,this.history.__proto__.constructor=this},e.History=void 0;var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=[],this.index=0}var e,n,o;return e=t,(n=[{key:"go",value:function(t){var e=this;console.log("go ".concat(t));var n=this.constructor.history,a=n.map.length;if(isNaN(t))return console.warn("val is not a Number");if(t=parseInt(t)){var o=n.index,r=a-1;o+=t,o=t>0?o>r?o=r:o:o<0?0:o,this.constructor.zoomOut(),this.constructor.history.index=o,setTimeout(function(){e.constructor.fadeIn()},1e3)}}},{key:"back",value:function(){var t=this,e=this.constructor.history.index;e&&(this.constructor.fadeOut(),this.constructor.history.index=e-1>0?e-1:0,setTimeout(function(){t.constructor.zoomIn()},1e3))}},{key:"forward",value:function(){var t=this,e=this.constructor.history,n=e.index;(n+=1)>=e.map.length||(this.constructor.history.index=n,this.constructor.zoomOut(),setTimeout(function(){t.constructor.fadeIn()},1e3))}},{key:"push",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:opt,e=t.boundary,n=t.blocks,a=t.key,o=t.usrData,r=this.constructor,i=r.history,s=function(){var t=r.options.map;t.boundary.data=e,t.blocks.data=n,r.options.usrData=o||{},r.setMapData(),i.map[i.index].parentID=a};r.zoomOut(),i.index+=1;var c=i.map[i.index];c?c.parentID!==a&&(i.map.length=i.index,s()):s(),setTimeout(function(){r.fadeIn()},1e3)}}])&&a(e.prototype,n),o&&a(e,o),t}();e.History=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawAllBoundary=function(){var t=this.history.map[this.history.index];this.clearCanvasCtx(),this.drawBlockBoundary(t),this.drawMainBoundary(t),this.drawBlockPoints(t),this.drawBlockText(t),this.ctx.setTransform(1,0,0,1,0,0),this.hitCtx.setTransform(1,0,0,1,0,0)},e.drawBoundary=function(t){var e=t.style,n=e.fillStyle,a={};n=t.hold?e.holdColor||n:t.over?e.hoverColor:n;a={fillStyle:n,lineWidth:e.lineWidth,strokeStyle:e.strokeStyle};for(var o=0,r=t._coordinates.length;o<r;o++){this.drawLine(this.ctx,t._coordinates[o],a);this.drawLine(this.hitCtx,t._coordinates[o],t.hitStyle)}},e.drawMainBoundary=function(t){this.drawBoundary(t.boundary)},e.drawBlockBoundary=function(t){for(var e=t.blocks.length,n=0;n<e;n++)this.drawBoundary(t.blocks[n])},e.drawArc=function(t,e,n){(t=this.setCtxState(n,t)).arc(e.x,e.y,e.r,e.s,e.e,e.d),t.fill(),t.closePath(),t.restore()},e.drawBlockText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,n=this.options.map.blocks.cityName;if(!n)return;for(var a=t.blocks,o=n.move||{x:0,y:0},r=0,i=a.length;r<i;r++){var s=a[r],c=!1,l=s.width*t.mapScale,h=e.measureText(s.name).width;if(s.name&&(s.hold?c=s.nameStyle.hold:s.over&&(c=s.nameStyle.hover),c||(c=s.nameStyle.normal),h<l/this.textVsWidth||s.index===t.mouseMoveIndex)){var u=s.centroid.x*t.mapScale+o.x,d=s.centroid.y*t.mapScale+o.y;e.save(),e.shadowColor="rgba(128, 128, 128, .8)",e.shadowOffsetX=this.DPI,e.shadowOffsetY=this.DPI,this.drawText({txt:s.name,x:u,y:d,align:n.align},c,e),e.restore()}}},e.drawText=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.ctx,a=t.txt,o=t.x,r=t.y,i=t.align;n.save(),(n=this.setCtxState(e,n)).textAlign=i||"center",n.textBaseline="middle",n.fillText(a,o,r),n.restore()},e.drawCenterLine=function(){this.ctx.beginPath(),this.ctx.strokeStyle="red",this.ctx.moveTo(0,this.ctxH/2),this.ctx.lineTo(this.ctxW,this.ctxH/2),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="red",this.ctx.moveTo(this.ctxW/2,0),this.ctx.lineTo(this.ctxW/2,this.ctxH),this.ctx.stroke()},e.drawBlockPoints=function(t){var e=this,n=t.blocks;if(!t.hasPoint)return t;for(var a=function(a,o){var r=n[a].width*t.mapScale;n[a]._point.forEach(function(t){r>5*t.r&&e.drawArc(e.ctx,{x:t.x,y:t.y,r:t.r,s:0,e:2*Math.PI,d:!1},{fillStyle:t.color})})},o=0,r=n.length;o<r;o++)a(o,r)},e.drawLine=function(t,e,n){t=this.setCtxState(n,t);for(var a=0,o=e.length;a<o;a++){var r=e[a][0],i=e[a][1];0===a?t.moveTo(r,i):t.lineTo(r,i)}return t.lineJoin="round",t.closePath(),t.stroke(),t.fill(),t},e.translateCtx=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(this.ctxW-t.boundary.width*t.mapScale)/2+e,o=(this.ctxH-t.boundary.height*t.mapScale)/2+n;this.clearCanvasCtx(),this.ctx.translate(a,o),this.hitCtx.translate(a,o)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.selfStyle=function(t){for(var e in t)this[e]=t[e]},e.getBetweenRandom=function(t,e){return t+e*Math.random()},e.isInPolygon=function(t,e){var n,a,o,r=0,i=e.length;a=e[0];for(var s=1;s<=i;s++)o=e[s%i],t[0]>Math.min(a[0],o[0])&&t[0]<=Math.max(a[0],o[0])&&t[1]<=Math.max(a[1],o[1])&&a[0]!=o[0]&&(n=(t[0]-a[0])*(o[1]-a[1])/(o[0]-a[0])+a[1],(a[1]==o[1]||t[1]<=n)&&r++),a=o;return r%2!=0},e.scaleCoordinates=function(t,e){for(var n=[],a=0,o=t.length;a<o;a++){n[a]=[];for(var r=t[a],i=0,s=r.length;i<s;i++)n[a].push([r[i][0]*e,r[i][1]*e])}return n}},function(t,e,n){"use strict";function a(t){if(!Array.isArray(t))return console.warn("你需要传入数组!");for(var e,n,a,o,r,i,s=[],c=[],l=[],h=0,u=t.length;h<u;h+=2)s.push(t[h]),c.push(t[h+1]),l.push([t[h],t[h+1]]);return a=Math.min.apply({},s),r=Math.max.apply({},s),o=Math.min.apply({},c),i=Math.max.apply({},c),{width:e=r-a,height:n=i-o,x:{center:a+e/2,start:a,end:r},y:{center:o+n/2,start:o,end:i},centroid:function(t){for(var e=0,n=0,a=0,o=(t.length,0),r=t.length;o<r;o+=2){var i=parseFloat(t[o]),s=parseFloat(t[o+1]),c=parseFloat(t[o+2]),l=parseFloat(t[o+3]);o+3>t.length&&(c=parseFloat(t[0]),l=parseFloat(t[1]));var h=i*l-c*s;e+=h,n+=(i+c)*h,a+=(s+l)*h}var u=3*e;return{x:~~(n/u),y:~~(a/u)}}(t),coordinates:l}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=[],n=[],o={},r=[],i=0,s=t.length;i<s;i++){var c=a(t[i]);e.push(c.x.start,c.x.end),n.push(c.y.start,c.y.end),o=c.centroid,r.push(c.coordinates)}var l=Math.min.apply({},e),h=Math.min.apply({},n),u=Math.max.apply({},e),d=Math.max.apply({},n),f=u-l,p=d-h;return{width:f,height:p,coordinates:r,x:{start:l,end:u,center:l+f/2},y:{start:h,end:d,center:h+p/2},centroid:o}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setBoundary=function(t){var e=this.options.map.boundary;return Object.assign(e,(0,o.default)(e.data)),this.setColorsHashID(t,e,!0),t.mapScale=Math.min(this.hitMainCanvas.width/e.width,this.hitMainCanvas.height/e.height),t.boundary=Object.assign({},e),t.mapTranslateX=0,t.mapTranslateY=0,t},e.setBlocks=function(t){for(var e=this.options.map.blocks,n=e.data,a=e.color,r=Array.isArray(a),s=r?a.length:0,c=0,l=n.length;c<l;c++){var h=n[c],u=e.style;h.style&&h.style.hasOwnProperty("block")&&(u=h.style.block),!h.style&&e.color&&(r?u.fillStyle=a[c%s]:"boolean"==typeof a&&(u.fillStyle=this.getRandomColor())),h=Object.assign({},h,(0,o.default)(h.map),{style:new i.selfStyle(u),index:c,over:!1,hold:!1}),this.setColorsHashID(t,h),t.blocks.push(h)}return t},e.setTextName=function(t){var e=this,n=this.options.map.blocks.cityName;if(!n)return t;n.fixed||Object.keys(n).forEach(function(t){Object.assign(n[t],(0,r.setDPIFontSize)(n[t],e.DPI))});if(!n.hasOwnProperty("normal"))return console.warn("Don't find cityName has 'normal'");return t.blocks.forEach(function(t){t.nameStyle={normal:new i.selfStyle(n.normal),hover:new i.selfStyle(n.hover?n.hover:n.normal)}}),n.fixed=!0,t},e.getPoints=function(t){var e=this,n=this.options.map.blocks.point;if(!n)return t;t.hasPoint=!0;var a=Math.min.apply({},n.r),o=Math.max.apply({},n.r),r=function(t){for(var e=-1,n=-1;;)if(e=~~(0,i.getBetweenRandom)(t.x.start,t.x.end),n=~~(0,i.getBetweenRandom)(t.y.start,t.y.end),(0,i.isInPolygon)([e,n],t.coordinates[0]))return[e,n]};return t.blocks.forEach(function(t,c){if(n.size){var l,h=n.size,u=1,d=!1;t.blocks&&t.blocks.point&&t.blocks.point.size?(l=t.blocks.point.size,d=!0,Array.isArray(l)?(d="array",u=l.length):isNaN(l)||(u=l)):h.min!==h.max&&(u=~~(0,i.getBetweenRandom)(h.min,h.max)),t.point=[];for(var f=0;f<u;f++){var p=t.centroid,m=p.x,v=p.y,y={};if(n.fun&&(y=n.fun(c,t,e.options.usrData)),h.min!==h.max){var x=s(r(t),2);m=x[0],v=x[1]}var g="",b=0;d&&"array"===d?(g="color"in l[f]?l[f].color:n.color[~~(0,i.getBetweenRandom)(0,n.color.length)],b="r"in l[f]?l[f].r:(0,i.getBetweenRandom)(a,o)):(g=n.color[~~(0,i.getBetweenRandom)(0,n.color.length)],b=(0,i.getBetweenRandom)(a,o)),(y=Object.assign({},{r:b,color:g,position:{x:m,y:v}},y)).r*=e.DPI,t.point.push(y)}}}),t},e.setMapScale=function(t){var e=this.history,n=e.map[e.index],a=n.mapScale;e.map[e.index].mapScale=t||a,this.scaleBoundary(n),this.scaleBlocks(n),this.scalePoints(n)},e.scaleBoundary=function(t){0===t.mapTranslateX&&(t.mapTranslateX=0-t.boundary.x.start*t.mapScale,t.mapTranslateY=0-t.boundary.y.start*t.mapScale);t.boundary._coordinates=(0,i.scaleCoordinates)(t.boundary.coordinates,t.mapScale)},e.scaleBlocks=function(t){for(var e=0,n=t.blocks.length;e<n;e++){var a=t.blocks[e];a._coordinates=(0,i.scaleCoordinates)(a.coordinates,t.mapScale)}},e.scalePoints=function(t){var e=t.blocks;if(!t.hasPoint)return;for(var n=0,a=e.length;n<a;n++){e[n]._point=[];for(var o=e[n].point.length,r=0;r<o;r++){var i=e[n].point[r];e[n]._point.push({x:i.position.x*t.mapScale,y:i.position.y*t.mapScale,r:i.r,color:i.color})}}},e.setColorsHashID=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.colorsHash;for(;;){var o=this.getRandomColor();if(!a[o])return a[o]=e,void(e.hitStyle=new i.selfStyle({fillStyle:n?"rgba(0,0,0,0)":o}))}},e.getRandomColor=function(){var t=Math.round(255*Math.random()),e=Math.round(255*Math.random()),n=Math.round(255*Math.random());return"rgb(".concat(t,",").concat(e,",").concat(n,")")},e.hasSameHashColor=function(t,e){return e.color===t},e.scaleMap=function(t){var e=this,n=this.history.map[this.history.index];this.setMapScale(t),this.translateCtx(n,n.mapTranslateX,n.mapTranslateY),window.requestAnimationFrame(function(){return e.drawAllBoundary()})},e.getLikeGeoJson=function(t){for(var e=[],n=0,a=t.length;n<a;n+=2)e.push([t[n],t[n+1]]);return e};var a,o=(a=n(4))&&a.__esModule?a:{default:a},r=n(0),i=n(3);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){o=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCanvas=function(){var t=document.createElement("canvas"),e=this.eleBCR.width,n=this.eleBCR.height;return this.ctxW=t.width=e*this.DPI,this.ctxH=t.height=n*this.DPI,t.style.position="absolute",t.style.width=e+"px",t.style.height=n+"px",t},e.appendCanvasElement=function(){this.mainCanvas=this.createCanvas(),this.hitMainCanvas=this.createCanvas(),this.ctx=this.mainCanvas.getContext("2d"),this.hitCtx=this.hitMainCanvas.getContext("2d"),this.ele.appendChild(this.mainCanvas)},e.createTemCanvas=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.ctx,e=this.mainCanvas.width,n=this.mainCanvas.height,a=this.createCanvas(),o=t.getImageData(0,0,e,n);return a.getContext("2d").putImageData(o,0,0),a},e.clearCanvasCtx=function(t){this.ctx.clearRect(0,0,this.ctxW,this.ctxH),t||this.hitCtx.clearRect(0,0,this.ctxW,this.ctxH)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stepAnimate=function(t){var e=new Date,n=setInterval(function(){var a=new Date-e,o=a/t.duration;o>1&&(o=1);var r=t.delta(o);t.callback(r),1==o&&(clearInterval(n),t.doneback&&t.doneback())},t.delay||1e3/60)},e.linearAni=function(t){return t},e.quadAni=function(t){return Math.pow(t,5)},e.backAni=function(t){return Math.pow(t,2)*(3*t-2)},e.makeEaseInOutAni=function(t){return function(e){return 1-t(1-e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fadeIn=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,o=this.history.map[this.history.index];this.translateCtx(o,o.mapTranslateX,o.mapTranslateY),this.drawAllBoundary();var r=this.createTemCanvas();this.clearCanvasCtx(!0),this.inAnimate=!0,(0,a.stepAnimate)({duration:e,delta:(0,a.makeEaseInOutAni)(a.quadAni),callback:function(e){var a=e*n,o=a+(1-n);t.ctx.save(),t.ctx.globalAlpha=e,t.ctx.translate(t.mainCanvas.width/2*(n-a),t.mainCanvas.height/2*(n-a)),t.ctx.scale(o,o),t.clearCanvasCtx(!0),t.ctx.drawImage(r,0,0),t.ctx.restore()},doneback:function(){t.inAnimate=!1}})},e.fadeOut=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,o=this.createTemCanvas(),r=1-n;this.inAnimate=!0,(0,a.stepAnimate)({duration:e,delta:a.backAni,callback:function(e){t.ctx.save();var a=(1-e)*n+r;t.clearCanvasCtx(),t.ctx.globalAlpha=1-e,t.ctx.translate(t.mainCanvas.width/2*n*e,t.mainCanvas.height/2*n*e),t.ctx.scale(a,a),t.ctx.drawImage(o,0,0),t.ctx.restore()},doneback:function(){t.inAnimate=!1}})},e.zoomOut=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,o=this.createTemCanvas();this.inAnimate=!0,(0,a.stepAnimate)({duration:e,delta:a.backAni,callback:function(e){t.ctx.save();var a=e*n+1;t.clearCanvasCtx(),t.ctx.globalAlpha=1-e,t.ctx.translate(-t.ctxW/2*e*n,-t.ctxH/2*e*n),t.ctx.scale(a,a),t.ctx.drawImage(o,0,0),t.ctx.restore()},doneback:function(){t.inAnimate=!1}})},e.zoomIn=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,o=this.history.map[this.history.index];this.translateCtx(o,o.mapTranslateX,o.mapTranslateY),this.drawAllBoundary();var r=this.createTemCanvas();this.clearCanvasCtx(!0),this.inAnimate=!0,(0,a.stepAnimate)({duration:e,delta:(0,a.makeEaseInOutAni)(a.quadAni),callback:function(e){t.ctx.save();var a=.3-e*n+1;t.ctx.globalAlpha=e,t.ctx.translate(-t.ctxW/2*n*(1-e),-t.ctxH/2*n*(1-e)),t.ctx.scale(a,a),t.clearCanvasCtx(!0),t.ctx.drawImage(r,0,0),t.ctx.restore()},doneback:function(){t.inAnimate=!1}})};var a=n(7)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEleInfo=function(){this.ele=document.querySelector(this.options.el),this.eleBCR=this.ele.getBoundingClientRect()},e.init=function(){this.setHistory(),this.getEleInfo(),this.appendCanvasElement(),this.setMapData(),this.mouseEvt()},e.setMapData=function(){var t={mapScale:1,boundary:{},blocks:[],hasPoint:!1,mapTranslateX:0,mapTranslateY:0,colorsHash:{},mouseMoveIndex:-1,holdBlocks:[]};t.usrData=this.options.usrData,t=this.setBoundary(t),t=this.setBlocks(t),t=this.setTextName(t),t=this.getPoints(t),this.history.map[this.history.index]=t,this.setMapScale()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mouseEvt=function(){var t=this,e=-1,n=null,a=null,o=this.options,r=o.callback,i=o.map.blocks,s=i.selectedMode,c=i.style,l={hold:!1,x:0,y:0,status:!1},h=function(e,a,o){if(!n)return{index:-1};var r=t.hitCtx.getImageData(e,a,1,1).data,i="rgb(".concat(r[0],",").concat(r[1],",").concat(r[2],")"),s=n.colorsHash[i]||{index:-1};s&&o(s)},u=function(){t.translateCtx(n,t.mouseEvtData.mapX,t.mouseEvtData.mapY),t.drawAllBoundary()},d=function(t,e,n){r&&r.hasOwnProperty(t)&&r[t](e,n)};this.ele.addEventListener("mousemove",function(o){var r=o.offsetX*t.DPI,i=o.offsetY*t.DPI;if(!t.inAnimate)if(e!==t.history.index&&(e=t.history.index,n=t.history.map[e],a=n.blocks,t.mouseEvtData={mapX:n.mapTranslateX,mapY:n.mapTranslateY}),o.buttons&&l.hold){var s=r-l.x+n.mapTranslateX,c=i-l.y+n.mapTranslateY;(t.mouseEvtData.mapX-s||t.mouseEvtData.mapY-c)&&(t.mouseEvtData.mapX=s,t.mouseEvtData.mapY=c,l.status=!0,u())}else h(r,i,function(t){var e=n.mouseMoveIndex;t.index!==e?(e>-1&&(a[e].over=!1,u()),n.mouseMoveIndex=t.index,t.index>-1&&(t.over=!0,d("mousemove",o,t),u())):d("mousemove",o,t)})}),this.ele.addEventListener("mousedown",function(e){l.hold=!0,l.x=e.offsetX*t.DPI,l.y=e.offsetY*t.DPI}),this.ele.addEventListener("mouseup",function(e){if(l.hold=!1,l.status)l.status=!1,n.mapTranslateX=t.mouseEvtData.mapX,n.mapTranslateY=t.mouseEvtData.mapY;else{var o=e.offsetX*t.DPI,r=e.offsetY*t.DPI;h(o,r,function(t){if(-1!==t.index){if(t.index,n.holdBlocks.includes(n.mouseMoveIndex)){var o=n.holdBlocks.indexOf(t.index);n.holdBlocks.splice(o,1)}else"multiple"===s?n.holdBlocks.push(t.index):"single"===s&&(n.holdBlocks.length&&(a[n.holdBlocks[0]].style.fillStyle=c.fillStyle),n.holdBlocks=[t.index]);n.holdBlocks.forEach(function(t){a[t].style.fillStyle=c.holdColor}),u(),d("click",e,t)}})}})}},function(t,e,n){"use strict";function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};a.get||a.set?Object.defineProperty(e,n,a):e[n]=t[n]}return e.default=t,e}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){o(t,e,n[e])})}return t}({},a(n(10)),a(n(9)),a(n(8)),a(n(6)),a(n(5)),a(n(2)),a(n(0)),a(n(1))),i=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.DPI=window.devicePixelRatio,this.mainCanvas=null,this.ctx=null,this.hitCtx=null,this.ctxW=0,this.ctxH=0,this.inAnimate=!1,this.textVsWidth=2};Object.keys(r).forEach(function(t){Object.defineProperty(i.prototype,t,{value:r[t]})});var s=i;e.default=s}]).default});